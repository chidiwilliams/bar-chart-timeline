<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <canvas id="canvas" width="1100"></canvas>

    <script>
      const BAR_WIDTH = 1000;
      const BAR_MARGIN = 10;
      const BAR_HEIGHT = 40;
      const FONT_HEIGHT = 16;
      const BAR_LABEL_PADDING = 10;
      const FONT_STYLE = 'bold 16px Arial';

      function drawGraph({ elements }) {
        var canvas = document.getElementById('canvas');
        canvas.height = calculateTotalCanvasHeight(elements.length);
        drawCanvas(elements, canvas);
      }

      function drawCanvas(elements, canvas) {
        var ctx = canvas.getContext('2d');
        maxValue = getMaxElementValue(elements);

        elements.forEach((element, id) => {
          ctx.beginPath();
          const yMargin = (BAR_HEIGHT + BAR_MARGIN) * id;
          const barWidth = getBarWidth(element, maxValue, BAR_WIDTH);
          ctx.rect(0, yMargin, barWidth, BAR_HEIGHT);
          ctx.fill();

          ctx.textBaseline = 'top';
          ctx.font = FONT_STYLE;
          ctx.fillText(
            element,
            barWidth + BAR_LABEL_PADDING,
            yMargin + BAR_HEIGHT / 2 - FONT_HEIGHT / 2,
          );
        });
      }

      function getBarWidth(value, maxValue, maxBarWidth) {
        return (value / maxValue) * maxBarWidth;
      }

      function getMaxElementValue(elements) {
        return Math.max(...elements);
      }

      function calculateTotalCanvasHeight(numElements) {
        return numElements * BAR_HEIGHT + (numElements - 1) * BAR_MARGIN;
      }

      drawGraph({ elements: [40, 82, 12, 28, 19] });
    </script>
  </body>
</html>
